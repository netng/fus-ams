<div class="overflow-x-auto mb-4">
  <%= turbo_frame_tag "table" do %>
    <div class="min-w-full bg-white rounded-lg overflow-x-auto max-h-[500px]">
        <table class="min-w-full bg-white table-auto" data-table-target="table">
          <thead class="rounded-lg">
            <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
              <th class="sticky top-0 left-0 py-3 px-4 w-5 bg-gray-200 z-10">
                <div class="flex items-center space-x-2">
                  <input type="checkbox" data-table-target="parentCheckbox" data-action="change->table#toggleChildCheckbox" class="form-checkbox h-5 w-5 text-blue-600 focus:ring-blue-500 rounded border-none bg-slate-400">
                </div>
              </th>

              <th class="sticky top-0 py-3 px-6 text-left bg-gray-200 whitespace-nowrap">
                <%= sort_link(@q, :number, "#{t('activerecord.attributes.request_for_purchase.number')}",
                  { data: {turbo_action: :advance, action: "click->table#resetDeleteButton"} })
                %>
              </th>

              <th class="sticky top-0 py-3 px-6 text-left bg-gray-200 whitespace-nowrap">
                <%= sort_link(@q, :date, "#{t('activerecord.attributes.request_for_purchase.date')}",
                  { data: {turbo_action: :advance, action: "click->table#resetDeleteButton"} })
                %>
              </th>

              <th class="sticky top-0 py-3 px-6 text-left bg-gray-200 whitespace-nowrap">
                <%= sort_link(@q, :from_department_name, "#{t('custom.label.from_department')}", 
                  { data: {turbo_action: :advance, action: "click->table#resetDeleteButton"} })
                %>
              </th>

              <th class="sticky top-0 py-3 px-6 text-left bg-gray-200 whitespace-nowrap">
                <%= sort_link(@q, :to_department_name, "#{t('custom.label.to_department')}", 
                  { data: {turbo_action: :advance, action: "click->table#resetDeleteButton"} })
                %>
              </th>

              <th class="sticky top-0 py-3 px-6 text-left bg-gray-200 whitespace-nowrap">
                <%= sort_link(@q, :authorized_by, "#{t('activerecord.attributes.request_for_purchase.authorized_by')}", 
                  { data: {turbo_action: :advance, action: "click->table#resetDeleteButton"} })
                %>
              </th>
              
              <th class="sticky top-0 py-3 px-6 text-left bg-gray-200 whitespace-nowrap">
                <%= sort_link(@q, :capital_proposal_number, "#{t('activerecord.models.capital_proposal')}", 
                  { data: {turbo_action: :advance, action: "click->table#resetDeleteButton"} })
                %>
              </th>
              
              <th class="sticky top-0 py-3 px-6 text-left bg-gray-200 whitespace-nowrap">
                <%= sort_link(@q, :date, "#{t('activerecord.attributes.request_for_purchase.date')}", 
                  { data: {turbo_action: :advance, action: "click->table#resetDeleteButton"} })
                %>
              </th>


              <th class="sticky top-0 py-3 px-6 text-left bg-gray-200 whitespace-nowrap">
                <%= t("custom.label.total_po") %>
              </th>
            </tr>
          </thead>
          <tbody class="text-gray-600 text-sm font-light">
            <%= render @request_for_purchases %>
          </tbody>
        </table>
    </div>
    <div class="flex justify-between items-center my-4 mx-4">
      <%== pagy_info(@pagy) %>
      <%== pagy_nav(@pagy, anchor_string: 'data-turbo-action="advance" data-action="click->table#resetDeleteButton"') %>
    </div>
  <% end %>
</div>