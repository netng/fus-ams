<%= form_with model: [:admin, inventory_movement], data: { turbo_action: "advance" } do |f| %>

<div class="mb-2">
  <%= f.label :id_inventory_movement, "#{t("activerecord.attributes.inventory_movement.id_inventory_movement")}", class: "fus-label mb-2" %>
  <span class="block w-full p-2 outline-none border border-gray-300 rounded-lg bg-gray-200 text-gray-500">
    <% if inventory_movement.persisted? %>
      <strong><%= inventory_movement.id_inventory_movement %></strong>
    <% else %>
      <strong>&lt&ltAuto Generate&gt&gt</strong>
    <% end %>
  </span>
</div>

<div class="mb-2">
    <%= f.label :movement_type, class: "fus-label mb-2" %>
    <%= f.select :movement_type, 
        options_for_select(
          InventoryMovement::MOVEMENT_TYPES.map { |movement_type| [movement_type.humanize, movement_type] }
        ),
        { include_blank: "Select a movement type" },
        data: {
          controller: "tom-select",
          tom_select_target: "select"
        },
        class: "fus-input",
        required: true
    %>
  </div>

  <div class="w-full mb-2">
    <%= f.label :source, "#{t('activerecord.attributes.inventory_movement.source_site_id')}", class: "fus-label" %>
    <%= f.select :source_site_id,
      @parent_sites.map { |name, id| [name.capitalize, id]},
      {include_blank: t("custom.label.all", model: t("activerecord.attributes.inventory_movement.source_site_id")).capitalize},
      data: {
        controller: "turbo-dependent-select",
        turbo_dependent_select_target: "select",
        action: "filters#submit change->turbo-dependent-select#loadInventoryLocations change->turbo-dependent-select#updateSiteId",
        turbo_dependent_select_endpoint_value: inventory_locations_admin_inventories_path,
        turbo_dependent_select_inventory_location_outlet: ".asset-id"
      },
      class: "fus-tom-select",
      required: true
    %>
  </div>

  <div class="w-full mb-2">
    <%= f.label :destination, "#{t('activerecord.attributes.inventory_movement.destination_site_id')}", class: "fus-label" %>
    <%= f.select :destination_site_id,
      @parent_sites.map { |name, id| [name.capitalize, id]},
      {include_blank: t("custom.label.all", model: t("activerecord.attributes.inventory_movement.destination_site_id")).capitalize},
      data: {
        controller: "turbo-dependent-select",
        turbo_dependent_select_target: "select",
        action: "filters#submit change->turbo-dependent-select#loadInventoryLocations change->turbo-dependent-select#updateSiteId",
        turbo_dependent_select_endpoint_value: inventory_locations_admin_inventories_path,
        turbo_dependent_select_inventory_location_outlet: ".asset-id"
      },
      class: "fus-tom-select",
      required: true
    %>
  </div>

  <div class="mb-2">
    <%= f.label :status, "Status", class: "fus-label mb-2" %>
    <%= f.select :status, 
        options_for_select(
          InventoryMovement::MOVEMENT_STATUSES.map { |movement_status| [movement_status.humanize, movement_status] }, 
          f.object.status || inventory_movement::MOVEMENT_STATUSES.first
        ),
        { include_blank: "Select a status" },
        data: {
          controller: "tom-select",
          tom_select_target: "select"
        },
        class: "fus-input",
        required: true
    %>
  </div>


  <div class="flex flex-col md:flex-row items-center md:gap-2 mt-4">
    <%= f.submit "#{t('custom.label.save')}",
      data: { turbo_frame: "main-content" },
      class: "bg-fus-blue w-full text-white px-4 py-2 rounded hover:bg-blue-600 hover:cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-300 mb-4 md:mb-0 md:w-auto"
    %>
    <%= link_to "#{t('custom.label.back')}",
      admin_inventories_path,
      data: {
          turbo_action: "advance"
      },
      class: "text-center bg-slate-100 w-full px-4 py-2 rounded hover:bg-slate-200 hover:cursor-pointer focus:outline-none focus:ring-2 focus:ring-slate-300 mb-4 md:mb-0 md:w-auto"
    %>
  </div>
<% end %>